<!DOCTYPE html>
<html lang="en">
<head>
	<title>Signup</title>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
<!-- <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database.js"></script> -->
<!-- <script src="/javascript/signuptrial.js"></script>	 -->
	<!-- <link rel="stylesheet" type="text/css" href="css/util.css"> -->
	<link rel="stylesheet" type="text/css" href="css/main.css">

</head>
<body>
<div class="header">
  <a href="Index.html" <span class="logo">Ruto</span><span class="hr4">.</span></a>
  <div class="header-right">
	  <div class="links">
    <a href="Login.html"> Log In</a>
	<a href="Signup.html">Sign Up</a>
	  </div>
  </div>
</div>
	<div class="bg-contact3" background-color:#f3f3f3;>
		<div class="container-contact3">
			<div class="wrap-contact3">
				<h2  color="#fd6a02" style = "font-size:36px;font-style:bold;"><font color="fd6a02">Create A New Account</font></h2><br/>
					<div class="wrap-input3 validate-input" data-validate="Enter your name">
						<input class="input3" type="text" id="name" placeholder="Username">
						<span class="focus-input3"></span>
					</div>
					<div class="wrap-input3 validate-input">
						<input class="input3" type="email" id="email" placeholder="Your Email">
						<span class="focus-input3"></span>
					</div>

					<div class="wrap-input3 validate-input">
						<input class="input3" type="password" id="password" placeholder="Password">
						<span class="focus-input3"></span>
					</div>
					<div class="container-contact3-form-btn">
						<button class="contact3-form-btn" id="signUp"><a class="btn1" style='text-decoration:none;'>Sign Up</a></button>
					</div>
			</div>
		</div>
	</div>
<!-- <script src="/javascript/main.js"></script> -->
</script>
</body>
<script type="module">
	// Import the functions you need from the SDKs you need
	import { initializeApp } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-app.js";
	import { getAuth, createUserWithEmailAndPassword, signInWithEmailAndPassword, signOut } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-auth.js";
	import { getDatabase, ref, set, child, get} from "https://www.gstatic.com/firebasejs/9.23.0/firebase-database.js";
	const firebaseConfig = {
    apiKey: "AIzaSyBbMOvDY15rJaOZIUM9jwzhrwAZ2pXXXXX",
    authDomain: "ruto-10c85.firebaseapp.com",
	databaseURL: "https://ruto-10c85-default-rtdb.firebaseio.com/",
    projectId: "ruto-10c85",
    storageBucket: "ruto-10c85.appspot.com",
    messagingSenderId: "666887134943",
    appId: "1:666887134943:web:4a5f9b63e6322342d4136a"
  };
  
  // Initialize Firebase
  const app = initializeApp(firebaseConfig);
  const db = getDatabase();
  const auth = getAuth();
  
  document.getElementById("signUp").addEventListener("click", function() {

  const name = document.getElementById("name").value;
  const email =  document.getElementById("email").value;
  const password = document.getElementById("password").value;
  
  createUserWithEmailAndPassword(auth, email, password)
      .then((userCredential) => {
        // Signed in 
        const user = userCredential.user;
        console.log(user);
        alert("Registration Successful!");

        // ...
      })
      .catch((error) => {
        const errorCode = error.code;
        const errorMessage = error.message;
        // ..
		alert(error);
        console.log(errorMessage);
        // window.location.href = 'Login.html';
      });
    });
// ----------------------------------------------------------------------------------------------------------------
//   function validation()
//   {
// 	let nameregex = /^[a-zA-Z0-9\s]+$/;
// 	let emailregx = /^[a-zA-Z0-9]+@(gmail|yahoo|outlook)\.com$/;

//   if(!nameregex.test(name.value))
//   {
// 	alert("Username Incorrect");
// 	return false;
//   }
//   if(!emailregx.test(email.value))
//   {
// 	alert("Enter a valid email address!");
// 	return false;
//   }
  
//   return true;
//   }

// ----------------------------------------------------------------------------------------------------------------

//   .then(function register()
//   {
// 	var user = auth.currentUser;
// 	const db_ref = ref(db);

// 	var userData = {
// 					name: name.value,
// 					email: email.value,
// 					password: password.value
// 				};
// 	db_ref.child('Users/'+ user.name).set(userData)

//   })
//   .catch(function register(error)
//   {
// 	var errorcode = error.code;
// 	var errormessage = error.message;
// 	alert(errormessage);
//   })

// ----------------------------------------------------------------------------------------------------------------

//   function registerUser()
// 	{
// 		if(!validation())
// 		{
// 			return;
// 		};

// 		const db_ref = ref(db);
		
// 		get(child(db_ref, "UsersList/"+ name.value)).then((snapshot)=>
// 		{
			
// 			if(snapshot.exists())
// 			{
// 				alert("Account Already Exists!");
// 			}
			
// 			else{
// 				set(ref(db, "UsersList/"+ name.value),
// 				{
// 					name: name.value,
// 					email: email.value,
// 					password: password.value
// 				})
// 				.then(()=>
// 				{
// 					alert("User Registered Successfully");
// 				})
// 				.catch((error)=>
// 				{
// 					alert("Error"+ error);
// 				})
// 			}
// 		});
// 	}

// 	signUp.addEventListener("click", registerUser)
// ----------------------------------------------------------------------------------------------------------------

    //----- End
  </script>
<!-- <script src="/javascript/signuptrial.js"></script> -->
</html>
